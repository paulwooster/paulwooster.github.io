<!DOCTYPE html>
<html>
    <header>
        <title>PixiJS Demo</title>
        <link rel="stylesheet" href="index.css">
        <script src="pixi.js"></script>
    </header>
    <body>
        <script>
            // Based on code from https://pixijs.com/guides/basics/getting-started

            let app =  new PIXI.Application({ width: 512, height: 512});

            document.body.appendChild(app.view);
            app.renderer.resize(window.innerWidth, window.innerHeight);

            let sprite = PIXI.Sprite.from('../assets/terrain/terrain_roadCross_NE.png');

            sprite.anchor.set(0.5,0.615);
            sprite.hitArea = new PIXI.Polygon(
                64,0,
                0,32,
                -64,0,
                0,-32
            );

            sprite.x = 100; // 100 //-512 + 256 + 64; // app.screen.width / 2;
            sprite.y = 100; // 100 // -256 // + 315//+ 283; // app.screen.height / 2;

            sprite.eventMode = "static";
            sprite.on('pointerdown', (event) => { alert('clicked!'); });

            sprite.on('pointerover', (event) => { console.log(elapsed); });


            // Add the sprite 
            app.stage.addChild(sprite);

              // Add a variable to count up the seconds our demo has been running
            let elapsed = 0.0;
            let fullScreen = false;

           app.ticker.add((delta) => {
                // Add the time to our total elapsed time
                elapsed += delta;
                // Update the sprite's X position based on the cosine of our elapsed time.  We divide
                // by 50 to slow the animation down a bit...
                //sprite.x = window.innerWidth/2 + Math.cos(elapsed/500.0) * 100.0;
            });

            // Fullscreen in pixi is resizing the renderer to be window.innerWidth by window.innerHeight
            window.addEventListener("resize", function() {
                console.log(`Before height: ${app.screen.height}`)
                app.renderer.resize(window.innerWidth, window.innerHeight);
                console.log(`After height: ${app.screen.height}`)
                sprite.x = app.screen.width / 2;
                sprite.y = app.screen.height / 2;
            });

                            /*
                if (elapsed > 100 & !fullScreen & elapsed < 110) {
                    document.documentElement.requestFullscreen();
                    fullScreen = true;
                };
                
                if (elapsed > 200 & fullScreen) {
                    document.exitFullscreen();
                    fullScreen = false;
                };
                */


        </script>
    </body>
</html>
