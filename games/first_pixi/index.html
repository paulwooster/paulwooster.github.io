<!DOCTYPE html>
<html>
    <header>
        <title>PixiJS Demo</title>
        <link rel="stylesheet" href="index.css">
        <script src="pixi.js"></script>
    </header>
    <body>
        <script>
            // Based on code from https://pixijs.com/guides/basics/getting-started

            let app =  new PIXI.Application(window.innerWidth, window.innerHeight, {
                backgroundColor: 0xcccccc,
                transparent: true
            });

            document.body.appendChild(app.view);
            app.renderer.resize(window.innerWidth, window.innerHeight);

            // Magically load the PNG asynchronously
            let sprite = PIXI.Sprite.from('../assets/terrain/terrain_roadCross_NE.png');

            sprite.anchor.set(0.5);
            sprite.x = app.screen.width / 2;
            sprite.y = app.screen.height / 2;
            // Add the sprite 
            app.stage.addChild(sprite);

              // Add a variable to count up the seconds our demo has been running
            let elapsed = 0.0;
            let fullScreen = false;
            // Tell our application's ticker to run a new callback every frame, passing
            // in the amount of time that has passed since the last tick
            app.ticker.add((delta) => {
                // Add the time to our total elapsed time
                elapsed += delta;
                // Update the sprite's X position based on the cosine of our elapsed time.  We divide
                // by 50 to slow the animation down a bit...
                sprite.x = window.innerWidth/2 + Math.cos(elapsed/50.0) * 100.0;

                /*
                if (elapsed > 100 & !fullScreen & elapsed < 110) {
                    document.documentElement.requestFullscreen();
                    fullScreen = true;
                };
                
                if (elapsed > 200 & fullScreen) {
                    document.exitFullscreen();
                    fullScreen = false;
                };
                */

            });

            // Fullscreen in pixi is resizing the renderer to be window.innerWidth by window.innerHeight
            window.addEventListener("resize", function() {
                app.renderer.resize(window.innerWidth, window.innerHeight);
                sprite.x = app.screen.width / 2;
                sprite.y = app.screen.height / 2;
            });
        </script>
    </body>
</html>
